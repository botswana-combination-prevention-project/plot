{% load staticfiles %}
{% load crispy_forms_tags %}

<div class="container">
   <div class="row">
      <div class="col-md-12">
        <div class="panel-group">
          <div class="panel panel-info">
            <div class="panel-heading clearfix">
              <a title="add plot" href="{% url 'plot:plot_admin:plot_plot_add' %}?next=plots_url" class="btn btn-sm btn-default" role="button"><span class="glyphicon glyphicon-plus"></span> Add Plot</a>
              <a title="confirmed" class="btn btn-sm btn-default" role="button">Confirmed</a>
              <a title="not confirmed" class="btn btn-sm btn-default" role="button">Not confirmed</a>
              <span class="pull-right">
                <!--start searchform-->
                {% crispy form %}
                <!--end searchform-->
              </span>
            </div>
            <div class="panel-body">
              <!--start results-->
              {% if results %}
                  <div class="table-responsive">
                    <table class="table table-condensed table-hover">
                      <thead>
                      		<th>#</th>
                      		<th></th>
                      		<th>Plot</th>
                      		<th>Status</th>
                      		<th>Households</th>
                      		<th>Members</th>
                      		<th>Map</th>
                      		<th>Modified</th>
                        </thead>
                        <tbody>
                        {% for result in results %}
                          <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>
                            	{% if result.plot.confirmed %}
                            		<center><i class="fa fa-check fa-md" aria-hidden="true"></i></center>
                              {% else %}
                                {% if result.plot_log_entry %}
                                  <a role="button" class="btn btn-sm btn-success {{result.plot_log_entry_link_html_class}}" href="{% url 'plot:plot_admin:plot_plotlogentry_change' result.plot_log_entry.entry.pk %}?plot_log={{result.log.pk}}&next=plot:list_url"><span class="glyphicon glyphicon-pencil"></span>Edit Entry</a>
                                {% else %}
                                    <a role="button" class="btn btn-sm btn-default" href="{% url 'plot:plot_admin:plot_plotlogentry_add' %}?plot_log={{result.log.pk}}&next=plot:list_url">
                                    <span class="glyphicon glyphicon-plus"></span>Add Log</a>
                                {% endif %}
                            	{% endif %}
                            </td>
                            <td><a role="button" class="btn btn-sm {% if result.plot.confirmed %}btn-success{%else%}btn-default{%endif%}" href="{% url 'plot:plot_admin:plot_plot_change' result.plot.id %}?next=plot:list_url"><span class="glyphicon glyphicon-pencil"></span>  {{ result.plot.plot_identifier }}</a></td>
                            <td>{{ result.plot.get_status_display }}</td>
                            <td><a role="button" class="btn btn-sm btn-default" href="#"><span class="badge">{{ result.plot.household_count }}</span> Household</a></td>
                            <td><a role="button" class="btn btn-sm btn-default" href="#"><span class="badge">{{ result.plot.eligible_members }}</span> Members</a></td>
                            <td>
                            	{% if result.plot.confirmed %}
                            		<a role="button" class="btn btn-sm btn-success" href="#"><span class="glyphicon glyphicon-map-marker"></span> {{result.plot.community_name|title}}</a>
                            	{% else %}
                            		<span class="glyphicon glyphicon-map-marker"></span><span class="text text-danger">missing gps</span>
                            	{% endif %}
                            </td>
                            <td>{{ result.plot.modified|date:"Y-m-d" }}</td>
                          </tr>
                        {% endfor %}
                      </tbody>
                    </table>
                    {% include 'edc_base/paginator.html' %}
                  </div>
              {% endif %}
              <!--end results-->
            </div>
          </div>
        </div>
      </div>
    </div> 
  </div>
{% load staticfiles %}
{% load crispy_forms_tags %}

<div class="container">
   <div class="row">
      <div class="col-md-12">
        <div class="panel-group">
          <div class="panel panel-info">
            <div class="panel-heading clearfix">
              <i class="fa fa-building fa-lg"></i>
              <a title="add plot" href="{% url 'plot:plot_admin:plot_plot_add' %}?next=plot:list_url" class="btn btn-sm btn-default" role="button"><span class="glyphicon glyphicon-plus"></span> Add Plot</a>
              <a title="confirmed" class="btn btn-sm btn-default" role="button">Confirmed</a>
              <a title="not confirmed" class="btn btn-sm btn-default" role="button">Not confirmed</a>
              {% include 'edc_search/search_form.html' %}
            </div>
            <div class="panel-body">
              <!--start results-->
              {% if results %}
                  <div class="table-responsive">
                    <table class="table table-condensed table-hover small">
                      <thead>
                      		<th>#</th>
                      		<th></th>
                      		<th>Plot</th>
                      		<th>Status</th>
                      		<th></th>
                      		<th>Modified</th>
                        </thead>
                        <tbody>
                        {% for result in results %}
                          <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>
                            	{% if result.plot.confirmed %}
                            		<center><i class="fa fa-check fa-md" aria-hidden="true"></i></center>
                              {% else %}
                                {% if result.plot_log_entry %}
                                  <a role="button" class="btn btn-sm btn-success {{result.plot_log_entry_link_html_class}}" href="{% url 'plot:plot_admin:plot_plotlogentry_change' result.plot_log_entry.entry.pk %}?plot_log={{result.log.pk}}&next=plot:list_url"><span class="glyphicon glyphicon-pencil"></span>Edit Entry</a>
                                {% else %}
                                    <a role="button" class="btn btn-sm btn-default" href="{% url 'plot:plot_admin:plot_plotlogentry_add' %}?plot_log={{result.log.pk}}&next=plot:list_url">
                                    <span class="glyphicon glyphicon-plus"></span>Add Log</a>
                                {% endif %}
                            	{% endif %}
                            </td>
                            <td><a title="change plot" role="button" class="btn btn-sm {% if result.plot.confirmed %}btn-success{%else%}btn-default{%endif%}" href="{% url 'plot:plot_admin:plot_plot_change' result.plot.id %}?next=plot:list_url"><span class="glyphicon glyphicon-pencil"></span>  {{ result.plot.plot_identifier }}</a></td>
                            <td>{{ result.plot.get_status_display }}</td>
                            <td>
                              <a role="button" title="households" class="btn btn-sm btn-default" href="{% url 'household:list_url' plot_identifier=result.plot.plot_identifier %}"> <i class="fa fa-home fa-lg"></i> <span class="badge">{{ result.plot.household_count }}</span></a>
                              <a role="button" title="members" class="btn btn-sm btn-default" href="{% url 'member:list_url' plot_identifier=result.plot.plot_identifier %}"> <i class="fa fa-group fa-lg"></i> <span class="badge">{{ result.plot.eligible_members }}</span></a>
                            	{% if result.plot.confirmed %}
                            		<a role="button" title="map" class="btn btn-sm btn-default" href="#"><i class="fa fa-map-marker fa-lg"></i> {{result.plot.community_name|title}}</a>
                            	{% else %}
                            		<i class="fa fa-map-marker fa-lg"></i> <span class="text text-danger">Not confirmed</span>
                            	{% endif %}
                            </td>
                            <td>{{ result.plot.modified|date:"Y-m-d" }}</td>
                          </tr>
                        {% endfor %}
                      </tbody>
                    </table>
                    {% include 'edc_search/paginator.html' %}
                  </div>
              {% endif %}
              <!--end results-->
            </div>
          </div>
        </div>
      </div>
    </div> 
  </div>